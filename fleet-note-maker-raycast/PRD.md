# PRD: Fleet Note Maker for Raycast

## 프로젝트 개요

Raycast용 메모 작성 스크립트로, 빠르게 메모를 작성하고 Fleet 폴더에 저장하는 생산성 도구입니다.

**스크립트 호출 이름**: `fleet note maker`

## 핵심 기능

### 1. 입력 폼

사용자가 메모 정보를 입력할 수 있는 인터페이스 제공:

- **제목** (필수): 메모의 제목
- **본문** (필수): 메모의 내용
- **태그** (필수): 쉼표로 구분된 태그 입력 (예: `개발, 아이디어, 급함`)
- **확인 버튼**: 입력 완료 후 파일 생성

### 2. 유효성 검사

#### 필수 항목 검사

- 제목이 비어있는 경우 → 에러 메시지: "제목을 입력해주세요"
- 본문이 비어있는 경우 → 에러 메시지: "본문을 입력해주세요"
- 태그가 비어있는 경우 → 에러 메시지: "최소 1개 이상의 태그를 입력해주세요"

#### 태그 검증 및 처리

- 쉼표만 입력된 경우 (예: `,,, `) → 에러 메시지: "유효한 태그를 입력해주세요"
- 빈 태그 자동 제거 (예: `태그1, , 태그3` → `태그1, 태그3`)
- 앞뒤 공백 자동 제거 (예: `태그1 , 태그2` → `태그1, 태그2`)
- 저장 시 해시태그로 변환 (예: `개발, 아이디어` → `#개발 #아이디어`)

#### 파일명 검증

- 공백을 언더바(`_`)로 변환 (예: `프로젝트 회의록` → `프로젝트_회의록`)
- 특수문자 제거: `/`, `\`, `:`, `*`, `?`, `"`, `<`, `>`, `|` 등
- 파일명 길이 제한: 최대 100자 (OS 호환성)

### 3. 파일 생성

#### 저장 경로

```
/Users/saisiot/agents/memo2fleet/
```

#### 파일명 규칙

```
YYMMDD_제목.md
```

- `YYMMDD`: 6자리 날짜 (예: 250129)
- 제목: 사용자 입력 제목 (공백은 언더바로 변환)

**예시:**

- `250129_프로젝트_회의록.md`
- `250130_Raycast_스크립트_아이디어.md`
- `250131_버그_수정_내역.md`

#### 파일 내용 형식 (Markdown)

```markdown
# [제목]

[본문 내용]

#태그1 #태그2 #태그3
```

**실제 예시:**

```markdown
# 프로젝트 회의록

2025년 Q1 주요 목표 설정

- 신규 기능 3개 출시
- 성능 개선 20%
- 사용자 만족도 90% 이상

#회의 #프로젝트 #Q1
```

**참고:**

- Front Matter는 포함하지 않음 (다른 에이전트가 후처리)
- 태그는 본문 맨 아래에 해시태그 형식으로 작성

### 4. 사용자 피드백

#### 성공 시

- Toast 메시지: "✅ 메모가 저장되었습니다: YYMMDD\_제목.md"

#### 실패 시

- 명확한 에러 메시지 표시
- 입력 폼 유지 (데이터 손실 방지)

## 기술 스펙

### 개발 환경

- **플랫폼**: Raycast Extension
- **언어**: TypeScript
- **런타임**: Node.js
- **UI**: Raycast API (`@raycast/api`)

### 주요 의존성

```json
{
  "@raycast/api": "^1.x.x",
  "@raycast/utils": "^1.x.x"
}
```

### 필요한 Raycast API

- `Form`: 입력 폼 UI
- `ActionPanel`: 액션 버튼
- `Action`: 제출 액션
- `showToast`: 피드백 메시지
- `Toast.Style`: 성공/실패 스타일
- `useNavigation`: 네비게이션 제어

## 에러 처리

### 입력 검증 에러

| 에러 케이스    | 에러 메시지                           | 처리 방법                   |
| -------------- | ------------------------------------- | --------------------------- |
| 제목 누락      | "제목을 입력해주세요"                 | 폼 유지, 제목 필드에 포커스 |
| 본문 누락      | "본문을 입력해주세요"                 | 폼 유지, 본문 필드에 포커스 |
| 태그 누락      | "최소 1개 이상의 태그를 입력해주세요" | 폼 유지, 태그 필드에 포커스 |
| 태그 형식 오류 | "유효한 태그를 입력해주세요"          | 폼 유지, 태그 필드에 포커스 |
| 제목 너무 김   | "제목은 100자 이내로 입력해주세요"    | 폼 유지, 제목 재입력        |

### 파일 시스템 에러

| 에러 케이스      | 에러 메시지                                       | 처리 방법                |
| ---------------- | ------------------------------------------------- | ------------------------ |
| 권한 없음        | "저장 권한이 없습니다"                            | 권한 확인 안내           |
| 디스크 공간 부족 | "저장 공간이 부족합니다"                          | 공간 확보 안내           |
| 알 수 없는 오류  | "파일 저장 중 오류가 발생했습니다: [상세 메시지]" | 로그 기록 및 재시도 안내 |

## 사용자 시나리오

### 기본 사용 플로우

1. Raycast 실행 (`Cmd + Space`)
2. "fleet note maker" 검색 및 실행
3. 폼 작성:
   - 제목: "프로젝트 회의록"
   - 본문: "Q1 목표 논의..."
   - 태그: "회의, 프로젝트"
4. `Cmd + Enter` 또는 "확인" 클릭
5. 성공 메시지 확인
6. 파일 자동 저장 완료 (`250129_프로젝트_회의록.md`)

### 예외 플로우

1. 필수 항목 누락 시 → 에러 표시 → 재입력
2. 특수문자 포함 제목 → 자동 필터링 → 저장
3. 태그에 공백 포함 → 자동 trim 후 저장

## 제약사항

### 기술적 제약

- Raycast API 버전 호환성
- macOS 전용 (Raycast 플랫폼 특성)
- 로컬 파일 시스템 의존

### 비즈니스 제약

- 개인 생산성 도구 (멀티유저 미지원)
- 오프라인 환경에서만 동작

## macOS 권한 설정

### Full Disk Access 권한 필수

Raycast Extension이 파일 시스템에 쓰기를 하려면 **Full Disk Access** 권한이 필요합니다.

#### 권한 부여 방법

1. **시스템 설정** 열기
2. **개인정보 보호 및 보안** 선택
3. **전체 디스크 접근 권한** (Full Disk Access) 클릭
4. 좌측 하단 자물쇠 아이콘 클릭하여 잠금 해제
5. **+** 버튼 클릭
6. **애플리케이션** 폴더에서 **Raycast** 선택
7. Raycast 옆 체크박스 활성화
8. Raycast 재시작

#### 권한 미부여 시 동작

- 파일 저장 시도 시 권한 에러 발생
- 에러 메시지: "저장 권한이 없습니다"
- 사용자에게 권한 설정 안내 표시

#### 확인 방법

Extension 초기 실행 시 저장 경로에 테스트 파일 쓰기를 시도하여 권한 확인 가능 (선택사항)

## 개발 계획

이 프로젝트는 Claude Code가 자동으로 구현합니다.

### 구현 순서

1. Raycast Extension 프로젝트 초기화
2. 입력 폼 UI 구현 (제목, 본문, 태그 필드)
3. 유효성 검사 로직 구현
4. 태그 처리 로직 (쉼표 구분 → 해시태그 변환)
5. 파일명 생성 로직 (날짜 + 제목, 공백 → 언더바)
6. 파일 저장 로직
7. 에러 처리 및 Toast 메시지

## 참고 자료

- [Raycast API Documentation](https://developers.raycast.com/)
- [Raycast Form Examples](https://developers.raycast.com/examples/forms)
- [TypeScript Best Practices](https://www.typescriptlang.org/docs/handbook/declaration-files/do-s-and-don-ts.html)
